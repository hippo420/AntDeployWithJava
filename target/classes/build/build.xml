<project name="MyProject" default="main" basedir="." >
    <property name="lib.dir" value="D:\DEV\AntDeploy\src\main\resources\lib"/>

    <property name="host" value="192.168.0.7"/>
    <property name="port" value="22"/>
    <property name="username" value="jenkins"/>
    <property name="password" value="1"/>
    <property name="local.file" value="D:/DEV/changet/src/main/resources/META/code.txt"/>
    <property name="remote.dir" value="/home/dev"/>

    <!-- Ant-Contrib JAR 파일을 classpath에 추가 -->
    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
    <classpath>
        <fileset dir="${lib.dir}">
            <include name="ant-contrib-1.0b3.jar"/>

        </fileset>
    </classpath>
    </taskdef>

    <taskdef name="scp" classname="org.apache.tools.ant.taskdefs.optional.ssh.Scp">
        <classpath>
            <fileset dir="${lib.dir}">
                <include name="jsch-0.1.55.jar"/>
                <include name="ant-jsch-1.6.5.jar"/>
            </fileset>
        </classpath>
    </taskdef>

    <!-- 기본적인 빌드 작업 -->
    <target name="main">

        <echo message="Hello, Ant-Contrib!"/>
    </target>

    <target name="transfer-file">
        <echo message="Transferring file ${local.file} to ${username}@${host}:${remote.dir}"/>

        <scp file="${local.file}" todir="${username}@${host}:${remote.dir}" password="${password}" port="${port}"/>

    </target>

    <!-- 예제: if 조건문 사용 -->
    <target name="if-example">
        <if>
            <equals arg1="true" arg2="true"/>
            <then>
                <echo message="Condition met!"/>
            </then>
            <else>
                <echo message="Condition not met!"/>
            </else>
        </if>
    </target>
</project>
